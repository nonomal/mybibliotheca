{% with msgs = get_flashed_messages(with_categories=True) %}
  {% if msgs %}
    <div class="mb-2">
      {% for c,m in msgs %}<div class="alert alert-{{ 'danger' if c=='error' else c }} py-1 mb-1 small">{{ m }}</div>{% endfor %}
    </div>
  {% endif %}
{% endwith %}
<form method="POST" action="{{ url_for('auth.settings_password_submit') }}" hx-post="{{ url_for('auth.settings_password_submit') }}" hx-target="#personalDynamicContainer" hx-swap="innerHTML">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
  <div class="mb-3">{{ form.current_password.label(class='form-label') }}{{ form.current_password(class='form-control') }}{% for e in form.current_password.errors %}<div class='text-danger small'>{{ e }}</div>{% endfor %}</div>
  <div class="mb-3">{{ form.new_password.label(class='form-label') }}{{ form.new_password(class='form-control') }}{% for e in form.new_password.errors %}<div class='text-danger small'>{{ e }}</div>{% endfor %}</div>
  <div class="mb-3">{{ form.new_password2.label(class='form-label') }}{{ form.new_password2(class='form-control') }}{% for e in form.new_password2.errors %}<div class='text-danger small'>{{ e }}</div>{% endfor %}</div>
  <button class="btn btn-warning"><i class="bi bi-lock"></i> Change Password</button>
</form>
